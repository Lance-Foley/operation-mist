<script src="https://code.highcharts.com/highcharts.js"></script>

<div class="container mt-3 bg-opacity-100">
  <div class="row">

    <div class="col ">
      <p class="text-center">Three Month Workload</p>
      <p class="text-center text-muted fs-6 fw-light "> Amount Of Worked Assigned Based On The Work Force Available</p>
      <hr>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Field 1</p>
          <div class="progress ">
            <div class="progress-bar  text-warning" role="progressbar" style="width: <%= three_month_workload(1).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= three_month_workload(1).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Field 2</p>
          <div class="progress ">
            <div class="progress-bar text-warning" role="progressbar" style="width: <%= three_month_workload(2).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= three_month_workload(2).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Field 3</p>
          <div class="progress ">
            <div class="progress-bar text-warning" role="progressbar" style="width: <%= three_month_workload(3).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= three_month_workload(3).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Field 4</p>
          <div class="progress ">
            <div class="progress-bar text-warning" role="progressbar" style="width: <%= three_month_workload(4).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= three_month_workload(4).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Shop</p>
          <div class="progress ">
            <div class="progress-bar text-warning" role="progressbar" style="width: <%= three_month_workload(5).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= three_month_workload(5).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Arch-Design</p>
          <div class="progress ">
            <div class="progress-bar text-warning" role="progressbar" style="width: <%= three_month_workload(6).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= three_month_workload(6).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Cabinet-Design</p>
          <div class="progress ">
            <div class="progress-bar text-warning" role="progressbar" style="width: <%= three_month_workload(7).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= three_month_workload(7).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Selections</p>
          <div class="progress ">
            <div class="progress-bar text-warning" role="progressbar" style="width: <%= three_month_workload(8).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= three_month_workload(8).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>


    </div>
    <div class="col ">
      <p class="text-center">Week Workload</p>
      <p class="text-center text-muted fs-6 fw-light "> Amount Of Worked Assigned Based On The Work Force Available</p>
      <hr>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Field 1</p>
          <div class="progress ">
            <div class="progress-bar text-warning" role="progressbar" style="width: <%= crew_week_workload(1).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= crew_week_workload(1).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Field 2</p>
          <div class="progress ">
            <div class="progress-bar text-warning" role="progressbar" style="width: <%= crew_week_workload(2).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= crew_week_workload(2).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Field 3</p>
          <div class="progress ">
            <div class="progress-bar text-warning" role="progressbar" style="width: <%= crew_week_workload(3).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= crew_week_workload(3).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Field 4</p>
          <div class="progress ">
            <div class="progress-bar text-warning" role="progressbar" style="width: <%= crew_week_workload(4).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= crew_week_workload(4).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Shop</p>
          <div class="progress ">
            <div class="progress-bar text-warning" role="progressbar" style="width: <%= crew_week_workload(5).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= crew_week_workload(5).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Arch-Design</p>
          <div class="progress ">
            <div class="progress-bar text-warning" role="progressbar" style="width: <%= crew_week_workload(6).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= crew_week_workload(6).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Cabinet-Design</p>
          <div class="progress ">
            <div class="progress-bar text-warning" role="progressbar" style="width: <%= crew_week_workload(7).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= crew_week_workload(7).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="container">
          <p class="float-start  pe-3">Selections</p>
          <div class="progress ">
            <div class="progress-bar text-warning" role="progressbar" style="width: <%= crew_week_workload(8).round(1) %>%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><%= crew_week_workload(8).round(1) %>
              %
            </div>
          </div>
        </div>
      </div>


    </div>
  </div>
  <div class="row">
    <div class="col ">
    </div>

  </div>
  <div class="row">
    <div class="col">
      <div class="row">
        <div class="col-8">
          <%#= render "/dashboard/crew_workload_chart" %>
          <%= bar_chart [{ name: "Assigned", data: Job.group(:crew_id).where(crew_id: @crews).sum(:three_month_hours) },
                         { name: "Available", data: Employee.group(:crew_id).where(crew_id: @crews).sum(:man_hours_three_months) },].chart_json %>
        </div>
        <div class="col">
          <div class="card justify-content-evenly bg-info">
            <p class="fw-bold  text-center d-inline"><span class="text-muted">Field 1 E-Rating:</span><br>
              <span class="fw-bold d-inline display-6"> <%= crew_e_rating(1).round(1) %>%</span>
            </p>
          </div>
          <div class="card justify-content-evenly bg-info mt-1">
            <p class="fw-bold  text-center d-inline"><span class="text-muted">Field 2 E-Rating:</span><br>
              <span class="fw-bold d-inline display-6"> <%= crew_e_rating(2).round(1) %>%</span>
            </p>
          </div>
          <div class="card justify-content-evenly bg-info mt-1">
            <p class="fw-bold  text-center d-inline"><span class="text-muted">Field 3 E-Rating:</span><br>
              <span class="fw-bold d-inline display-6"> <%= crew_e_rating(3).round(1) %>%</span>
            </p>
          </div>
          <div class="card justify-content-evenly bg-info mt-1">
            <p class="fw-bold  text-center d-inline"><span class="text-muted">Field 4 E-Rating:</span><br>
              <span class="fw-bold d-inline display-6"> <%= crew_e_rating(4).round(1) %>%</span>
            </p>
          </div>
        </div>
      </div>
    </div>

  </div>
  <div class="row mt-3">
    <div class="col">
      <%= render "dashboard/division_workload_card" %>
    </div>
    <div class="col">
      <div class="card justify-content-evenly bg-info mt-3">
        <p class="fw-bold  text-center d-inline"><span class="text-muted">Field E-Rating:</span><br>
          <span class="fw-bold d-inline display-3"> <%= division_e_rating("New Construction").round(1) %>%</span>
        </p>
      </div>
      <div class="card justify-content-evenly bg-info mt-3">
        <p class="fw-bold  text-center d-inline"><span class="text-muted">Shop E-Rating:</span><br>
          <span class="fw-bold d-inline display-3"> <%= division_e_rating("Shop").round(1) %>%</span>
        </p>
      </div>
      <div class="card justify-content-evenly bg-info mt-3">
        <p class="fw-bold  text-center d-inline"><span class="text-muted">Design E-Rating:</span><br>
          <span class="fw-bold d-inline display-3"> <%= division_e_rating("Design").round(1) %>%</span>
        </p>
      </div>
    </div>
  </div>
</div>