<!--<div data-controller="schedule"></div>-->
<script src="https://code.highcharts.com/gantt/highcharts-gantt.js"></script>
<script src="https://code.highcharts.com/gantt/modules/exporting.js"></script>
<script src="https://code.highcharts.com/gantt/modules/accessibility.js"></script>

<div id="container">
</div>
<button onclick="updateChart()">fetch_Data</button>

<style>
    #container {
        max-width: 800px;
        margin: 1em auto;
    }


</style>

<script type="text/javascript" charset="utf-8">


    function updateChart() {
        function crew_workload(obj) {
            const crews = obj[0].jobs[0].phase;


            // console.log(crews)
        };

        async function fetchData() {
            const url = 'http://localhost:3000/api/v1/charts/index.json';
            const response = await fetch(url);
            // wait until the request has been completed
            const crews = await response.json();
            console.log(crews);
            crew_workload(crews)
            let crewArray = crews.map(c => c.name)
            let jobArray = crews.map(j => j.jobs)
            // console.log(crewArray);
            // console.log(jobArray);

            for (let i in crews) {
                for (let j in crews[i]) {
                    for (let p in crews[i][j]) {
                        if (!crews[i][j][p].phase) {
                            console.log("empty")
                        } else {
                            console.log(crews[i][j][p].phase);
                        }
                    }
                }

            }
        };


        fetchData()


    };


</script>

